<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hanimus LLC - IT Tech Dispatch & Contractor Services</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Professional IT technician dispatch and contractor hiring platform. Find local techs for quick fixes or hire specialized contractors for long-term projects.">
    <meta name="keywords" content="IT support, technician dispatch, IT contractors, web developers, engineers, Sacramento IT, Citrus Heights">
    <meta name="author" content="Hanimus LLC">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='10' fill='%23DC2626'/><text x='50' y='65' font-size='50' fill='white' text-anchor='middle' font-family='Arial'>H</text></svg>">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            position: relative;
            overflow-x: hidden;
        }
        .gradient-bg { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
        .card-hover { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        .card-hover:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 20px 30px -5px rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.3);
        }
        .hero-gradient {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
        }
        .service-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.9) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            transition: all 0.3s ease;
        }
        .service-card:hover {
            border-color: rgba(220, 38, 38, 0.5);
            box-shadow: 0 20px 40px -10px rgba(220, 38, 38, 0.4);
            transform: translateY(-8px);
        }
        .profile-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            transition: all 0.3s ease;
        }
        .profile-card:hover {
            border-color: rgba(220, 38, 38, 0.4);
            box-shadow: 0 15px 30px -5px rgba(220, 38, 38, 0.3);
        }
        .skill-badge {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .filter-chip {
            transition: all 0.2s ease;
        }
        .filter-chip:hover {
            background: rgba(220, 38, 38, 0.2);
        }
        .filter-chip.active {
            background: #dc2626;
            color: white;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .float-animation {
            animation: float 6s ease-in-out infinite;
        }
        .stat-card {
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.1) 0%, rgba(153, 27, 27, 0.1) 100%);
            border: 1px solid rgba(220, 38, 38, 0.2);
        }

        /* Animated Background Words */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .floating-word {
            position: absolute;
            font-weight: 800;
            color: rgba(220, 38, 38, 0.12);
            pointer-events: none;
            white-space: nowrap;
            user-select: none;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        @keyframes floatDiagonal1 {
            0% {
                transform: translate(0, 0) rotate(-5deg);
                opacity: 0;
            }
            10% {
                opacity: 0.12;
            }
            90% {
                opacity: 0.12;
            }
            100% {
                transform: translate(100vw, -100vh) rotate(5deg);
                opacity: 0;
            }
        }

        @keyframes floatDiagonal2 {
            0% {
                transform: translate(0, 0) rotate(5deg);
                opacity: 0;
            }
            10% {
                opacity: 0.12;
            }
            90% {
                opacity: 0.12;
            }
            100% {
                transform: translate(-100vw, 100vh) rotate(-5deg);
                opacity: 0;
            }
        }

        @keyframes floatVertical {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.12;
            }
            90% {
                opacity: 0.12;
            }
            100% {
                transform: translateY(-150vh) rotate(10deg);
                opacity: 0;
            }
        }

        @keyframes floatHorizontal {
            0% {
                transform: translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.12;
            }
            90% {
                opacity: 0.12;
            }
            100% {
                transform: translateX(120vw) rotate(-10deg);
                opacity: 0;
            }
        }

        .word-1 { 
            animation: floatDiagonal1 40s linear infinite; 
            font-size: 6rem; 
            top: 10%; 
            left: -10%; 
            animation-delay: 0s;
            will-change: transform, opacity;
        }
        .word-2 { 
            animation: floatVertical 35s linear infinite; 
            font-size: 4rem; 
            top: 100%; 
            left: 15%; 
            animation-delay: 5s;
            will-change: transform, opacity;
        }
        .word-3 { 
            animation: floatHorizontal 45s linear infinite; 
            font-size: 5rem; 
            top: 30%; 
            left: -15%; 
            animation-delay: 2s;
            will-change: transform, opacity;
        }
        .word-4 { 
            animation: floatDiagonal2 50s linear infinite; 
            font-size: 7rem; 
            top: -10%; 
            right: -10%; 
            animation-delay: 8s;
            will-change: transform, opacity;
        }
        .word-5 { 
            animation: floatVertical 38s linear infinite; 
            font-size: 4.5rem; 
            top: 100%; 
            right: 20%; 
            animation-delay: 12s;
            will-change: transform, opacity;
        }
        .word-6 { 
            animation: floatDiagonal1 42s linear infinite; 
            font-size: 5.5rem; 
            top: 50%; 
            left: -20%; 
            animation-delay: 15s;
            will-change: transform, opacity;
        }
        .word-7 { 
            animation: floatHorizontal 48s linear infinite; 
            font-size: 6.5rem; 
            top: 70%; 
            left: -10%; 
            animation-delay: 20s;
            will-change: transform, opacity;
        }
        .word-8 { 
            animation: floatDiagonal2 44s linear infinite; 
            font-size: 4rem; 
            top: 20%; 
            right: -15%; 
            animation-delay: 25s;
            will-change: transform, opacity;
        }
        .word-9 { 
            animation: floatVertical 40s linear infinite; 
            font-size: 5rem; 
            top: 100%; 
            left: 50%; 
            animation-delay: 30s;
            will-change: transform, opacity;
        }
        .word-10 { 
            animation: floatDiagonal1 46s linear infinite; 
            font-size: 5.5rem; 
            top: 80%; 
            right: -10%; 
            animation-delay: 35s;
            will-change: transform, opacity;
        }
        .word-11 { 
            animation: floatHorizontal 43s linear infinite; 
            font-size: 4.5rem; 
            top: 40%; 
            left: -20%; 
            animation-delay: 10s;
            will-change: transform, opacity;
        }
        .word-12 { 
            animation: floatDiagonal2 47s linear infinite; 
            font-size: 6rem; 
            top: 60%; 
            right: -20%; 
            animation-delay: 18s;
            will-change: transform, opacity;
        }

        #root {
            position: relative;
            z-index: 10;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-100">
    <!-- Animated Background Words -->
    <div class="animated-bg">
        <div class="floating-word word-1">FREELANCER</div>
        <div class="floating-word word-2">IT SUPPORT</div>
        <div class="floating-word word-3">HIRE TALENT</div>
        <div class="floating-word word-4">TECHNICIAN</div>
        <div class="floating-word word-5">FAST RESPONSE</div>
        <div class="floating-word word-6">WORLDWIDE</div>
        <div class="floating-word word-7">PAY LESS</div>
        <div class="floating-word word-8">DEVELOPER</div>
        <div class="floating-word word-9">ENGINEER</div>
        <div class="floating-word word-10">CONTRACTOR</div>
        <div class="floating-word word-11">24/7 SUPPORT</div>
        <div class="floating-word word-12">PROFESSIONAL</div>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        // ============================================
        // FIREBASE CONFIGURATION
        // ============================================
        const firebaseConfig = {
            apiKey: "AIzaSyAnCHNfoslDSbrvqlQsLFcicjmo4G0ECVc",
            authDomain: "hanimus-dispatch.firebaseapp.com",
            databaseURL: "https://hanimus-dispatch-default-rtdb.firebaseio.com",
            projectId: "hanimus-dispatch",
            storageBucket: "hanimus-dispatch.firebasestorage.app",
            messagingSenderId: "779431998540",
            appId: "1:779431998540:web:1948b2777c77a5880930e9",
            measurementId: "G-K17S14ZD1P"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const database = firebase.database();
        const auth = firebase.auth();

        // ============================================
        // DATABASE HELPER FUNCTIONS
        // ============================================
        const DB = {
            // Customers
            async getCustomers() {
                const snapshot = await database.ref('customers').once('value');
                return snapshot.val() || {};
            },
            async getCustomer(id) {
                const snapshot = await database.ref(`customers/${id}`).once('value');
                return snapshot.val();
            },
            async saveCustomer(id, data) {
                await database.ref(`customers/${id}`).set(data);
            },
            async deleteCustomer(id) {
                await database.ref(`customers/${id}`).remove();
            },
            
            // Technicians/Contractors
            async getTechnicians() {
                const snapshot = await database.ref('technicians').once('value');
                return snapshot.val() || {};
            },
            async getTechnician(id) {
                const snapshot = await database.ref(`technicians/${id}`).once('value');
                return snapshot.val();
            },
            async saveTechnician(id, data) {
                await database.ref(`technicians/${id}`).set(data);
            },
            async deleteTechnician(id) {
                await database.ref(`technicians/${id}`).remove();
            },
            
            // Service Requests
            async getRequests() {
                const snapshot = await database.ref('requests').once('value');
                return snapshot.val() || {};
            },
            async getRequest(id) {
                const snapshot = await database.ref(`requests/${id}`).once('value');
                return snapshot.val();
            },
            async saveRequest(id, data) {
                await database.ref(`requests/${id}`).set(data);
            },
            async deleteRequest(id) {
                await database.ref(`requests/${id}`).remove();
            },
            
            // Contracts (for freelancer hiring)
            async getContracts() {
                const snapshot = await database.ref('contracts').once('value');
                return snapshot.val() || {};
            },
            async saveContract(id, data) {
                await database.ref(`contracts/${id}`).set(data);
            },
            
            // Admin
            async getAdmins() {
                const snapshot = await database.ref('admins').once('value');
                return snapshot.val() || {};
            },
            async saveAdmin(id, data) {
                await database.ref(`admins/${id}`).set(data);
            },
            
            // Real-time listeners
            onCustomersChange(callback) {
                return database.ref('customers').on('value', snapshot => {
                    callback(snapshot.val() || {});
                });
            },
            onTechniciansChange(callback) {
                return database.ref('technicians').on('value', snapshot => {
                    callback(snapshot.val() || {});
                });
            },
            onRequestsChange(callback) {
                return database.ref('requests').on('value', snapshot => {
                    callback(snapshot.val() || {});
                });
            }
        };

        // ============================================
        // MAIN APP COMPONENT
        // ============================================
        const App = () => {
            const [currentView, setCurrentView] = React.useState('landing');
            const [currentUser, setCurrentUser] = React.useState(null);
            const [userRole, setUserRole] = React.useState(null);

            const { useState, useEffect } = React;

            useEffect(() => {
                // Check for existing session
                const savedUser = localStorage.getItem('currentUser');
                const savedRole = localStorage.getItem('userRole');
                if (savedUser && savedRole) {
                    setCurrentUser(JSON.parse(savedUser));
                    setUserRole(savedRole);
                    if (savedRole === 'customer') setCurrentView('customer-dashboard');
                    else if (savedRole === 'technician') setCurrentView('technician-dashboard');
                    else if (savedRole === 'admin') setCurrentView('admin-dashboard');
                }
            }, []);

            const handleLogout = () => {
                localStorage.removeItem('currentUser');
                localStorage.removeItem('userRole');
                setCurrentUser(null);
                setUserRole(null);
                setCurrentView('landing');
            };

            // ============================================
            // LANDING PAGE
            // ============================================
            const LandingPage = () => {
                return (
                    <div className="min-h-screen">
                        {/* Navigation */}
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <div className="flex items-center space-x-3">
                                        <div className="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                                            <span className="text-white font-bold text-xl">H</span>
                                        </div>
                                        <span className="text-xl font-bold text-white">Hanimus LLC</span>
                                    </div>
                                    <div className="flex items-center space-x-4">
                                        <button
                                            onClick={() => setCurrentView('login')}
                                            className="px-4 py-2 text-slate-300 hover:text-white transition"
                                        >
                                            Sign In
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('register')}
                                            className="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition"
                                        >
                                            Get Started
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </nav>

                        {/* Hero Section */}
                        <div className="pt-24 pb-20 px-4">
                            <div className="max-w-7xl mx-auto">
                                <div className="text-center mb-16">
                                    <h1 className="text-5xl md:text-7xl font-black text-white mb-6 leading-tight">
                                        Find the Perfect
                                        <span className="block hero-gradient bg-clip-text text-transparent mt-2">
                                            IT Professional
                                        </span>
                                    </h1>
                                    <p className="text-xl text-slate-400 max-w-3xl mx-auto mb-8">
                                        Whether you need a quick tech fix or want to hire specialized contractors for long-term projects. 
                                        Connect with certified technicians, engineers, and developers instantly.
                                    </p>
                                    <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                        <button
                                            onClick={() => setCurrentView('register')}
                                            className="px-8 py-4 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-lg transition shadow-lg shadow-red-600/50"
                                        >
                                            üöÄ Get Started Free
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('register-technician')}
                                            className="px-8 py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold text-lg transition border border-slate-700"
                                        >
                                            üíº Join as Professional
                                        </button>
                                    </div>
                                </div>

                                {/* Service Types */}
                                <div className="grid md:grid-cols-2 gap-8 mb-20">
                                    <div className="service-card p-8 rounded-2xl">
                                        <div className="w-16 h-16 bg-red-600/20 rounded-2xl flex items-center justify-center mb-6">
                                            <span className="text-4xl">‚ö°</span>
                                        </div>
                                        <h3 className="text-2xl font-bold text-white mb-4">Quick Fix</h3>
                                        <p className="text-slate-400 mb-6">
                                            Need immediate tech support? Find certified technicians in your local area 
                                            ready to solve your IT issues fast. Same-day service available.
                                        </p>
                                        <div className="space-y-2 text-sm text-slate-300">
                                            <div className="flex items-center space-x-2">
                                                <span className="text-green-500">‚úì</span>
                                                <span>Local technicians near you</span>
                                            </div>
                                            <div className="flex items-center space-x-2">
                                                <span className="text-green-500">‚úì</span>
                                                <span>Rapid response time</span>
                                            </div>
                                            <div className="flex items-center space-x-2">
                                                <span className="text-green-500">‚úì</span>
                                                <span>Pay per service</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="service-card p-8 rounded-2xl">
                                        <div className="w-16 h-16 bg-blue-600/20 rounded-2xl flex items-center justify-center mb-6">
                                            <span className="text-4xl">üë•</span>
                                        </div>
                                        <h3 className="text-2xl font-bold text-white mb-4">Hire a Contractor</h3>
                                        <p className="text-slate-400 mb-6">
                                            Browse our network of specialized IT professionals. Hire engineers, 
                                            web developers, or technicians for ongoing projects and long-term contracts.
                                        </p>
                                        <div className="space-y-2 text-sm text-slate-300">
                                            <div className="flex items-center space-x-2">
                                                <span className="text-green-500">‚úì</span>
                                                <span>View detailed profiles & portfolios</span>
                                            </div>
                                            <div className="flex items-center space-x-2">
                                                <span className="text-green-500">‚úì</span>
                                                <span>Flexible contract terms</span>
                                            </div>
                                            <div className="flex items-center space-x-2">
                                                <span className="text-green-500">‚úì</span>
                                                <span>Nationwide talent pool</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Stats Section */}
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-6 mb-20">
                                    <div className="stat-card p-6 rounded-xl text-center">
                                        <div className="text-4xl font-black text-red-500 mb-2">500+</div>
                                        <div className="text-slate-400 text-sm">Certified Professionals</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl text-center">
                                        <div className="text-4xl font-black text-red-500 mb-2">24/7</div>
                                        <div className="text-slate-400 text-sm">Support Available</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl text-center">
                                        <div className="text-4xl font-black text-red-500 mb-2">98%</div>
                                        <div className="text-slate-400 text-sm">Customer Satisfaction</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl text-center">
                                        <div className="text-4xl font-black text-red-500 mb-2">1hr</div>
                                        <div className="text-slate-400 text-sm">Avg Response Time</div>
                                    </div>
                                </div>

                                {/* Features */}
                                <div className="text-center mb-12">
                                    <h2 className="text-4xl font-bold text-white mb-4">Why Choose Hanimus?</h2>
                                    <p className="text-slate-400 text-lg">Professional IT services made simple</p>
                                </div>

                                <div className="grid md:grid-cols-3 gap-8">
                                    <div className="card-hover bg-slate-900/50 p-6 rounded-xl">
                                        <div className="text-4xl mb-4">üîí</div>
                                        <h3 className="text-xl font-bold text-white mb-2">Verified Professionals</h3>
                                        <p className="text-slate-400">All technicians are certified and background-checked</p>
                                    </div>
                                    <div className="card-hover bg-slate-900/50 p-6 rounded-xl">
                                        <div className="text-4xl mb-4">üí≥</div>
                                        <h3 className="text-xl font-bold text-white mb-2">Secure Payments</h3>
                                        <p className="text-slate-400">Protected transactions with Stripe integration</p>
                                    </div>
                                    <div className="card-hover bg-slate-900/50 p-6 rounded-xl">
                                        <div className="text-4xl mb-4">‚≠ê</div>
                                        <h3 className="text-xl font-bold text-white mb-2">Quality Guaranteed</h3>
                                        <p className="text-slate-400">Rate and review every service for transparency</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Footer */}
                        <footer className="bg-slate-900 border-t border-slate-800 py-12 px-4">
                            <div className="max-w-7xl mx-auto text-center">
                                <div className="flex items-center justify-center space-x-2 mb-4">
                                    <div className="w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center">
                                        <span className="text-white font-bold">H</span>
                                    </div>
                                    <span className="text-lg font-bold text-white">Hanimus LLC</span>
                                </div>
                                <p className="text-slate-400 text-sm">¬© 2024 Hanimus LLC. All rights reserved.</p>
                            </div>
                        </footer>
                    </div>
                );
            };

            // ============================================
            // LOGIN PAGE
            // ============================================
            const LoginPage = () => {
                const [email, setEmail] = useState('');
                const [password, setPassword] = useState('');
                const [error, setError] = useState('');

                const handleLogin = async (e) => {
                    e.preventDefault();
                    setError('');

                    // Check admin
                    const admins = await DB.getAdmins();
                    const adminMatch = Object.entries(admins).find(([id, admin]) => 
                        admin.email === email && admin.password === password
                    );
                    if (adminMatch) {
                        const [adminId, adminData] = adminMatch;
                        setCurrentUser({ id: adminId, ...adminData });
                        setUserRole('admin');
                        localStorage.setItem('currentUser', JSON.stringify({ id: adminId, ...adminData }));
                        localStorage.setItem('userRole', 'admin');
                        setCurrentView('admin-dashboard');
                        return;
                    }

                    // Check customer
                    const customers = await DB.getCustomers();
                    const customerMatch = Object.entries(customers).find(([id, cust]) => 
                        cust.email === email && cust.password === password
                    );
                    if (customerMatch) {
                        const [custId, custData] = customerMatch;
                        setCurrentUser({ id: custId, ...custData });
                        setUserRole('customer');
                        localStorage.setItem('currentUser', JSON.stringify({ id: custId, ...custData }));
                        localStorage.setItem('userRole', 'customer');
                        setCurrentView('customer-dashboard');
                        return;
                    }

                    // Check technician
                    const technicians = await DB.getTechnicians();
                    const techMatch = Object.entries(technicians).find(([id, tech]) => 
                        tech.email === email && tech.password === password
                    );
                    if (techMatch) {
                        const [techId, techData] = techMatch;
                        setCurrentUser({ id: techId, ...techData });
                        setUserRole('technician');
                        localStorage.setItem('currentUser', JSON.stringify({ id: techId, ...techData }));
                        localStorage.setItem('userRole', 'technician');
                        setCurrentView('technician-dashboard');
                        return;
                    }

                    setError('Invalid email or password');
                };

                return (
                    <div className="min-h-screen flex items-center justify-center px-4 py-8">
                        <div className="max-w-md w-full">
                            <button
                                onClick={() => setCurrentView('landing')}
                                className="mb-6 text-slate-400 hover:text-white transition flex items-center space-x-2"
                            >
                                <span>‚Üê</span>
                                <span>Back to Home</span>
                            </button>

                            <div className="bg-slate-900/80 backdrop-blur-lg border border-slate-800 rounded-2xl p-8 shadow-2xl">
                                <div className="text-center mb-8">
                                    <div className="w-16 h-16 bg-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                        <span className="text-white font-bold text-2xl">H</span>
                                    </div>
                                    <h2 className="text-3xl font-bold text-white">Welcome Back</h2>
                                    <p className="text-slate-400 mt-2">Sign in to your account</p>
                                </div>

                                {error && (
                                    <div className="mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500 text-sm">
                                        {error}
                                    </div>
                                )}

                                <form onSubmit={handleLogin} className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Email</label>
                                        <input
                                            type="email"
                                            value={email}
                                            onChange={(e) => setEmail(e.target.value)}
                                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-red-600 focus:outline-none transition"
                                            placeholder="you@example.com"
                                            required
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Password</label>
                                        <input
                                            type="password"
                                            value={password}
                                            onChange={(e) => setPassword(e.target.value)}
                                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-red-600 focus:outline-none transition"
                                            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                            required
                                        />
                                    </div>

                                    <button
                                        type="submit"
                                        className="w-full py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition shadow-lg shadow-red-600/30"
                                    >
                                        Sign In
                                    </button>
                                </form>

                                <div className="mt-6 text-center text-sm text-slate-400">
                                    Don't have an account?{' '}
                                    <button
                                        onClick={() => setCurrentView('register')}
                                        className="text-red-500 hover:text-red-400 font-semibold"
                                    >
                                        Sign up
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ============================================
            // REGISTER PAGE
            // ============================================
            const RegisterPage = () => {
                const [formData, setFormData] = useState({
                    name: '',
                    company: '',
                    email: '',
                    phone: '',
                    address: '',
                    city: '',
                    state: '',
                    zip: '',
                    password: '',
                    confirmPassword: ''
                });
                const [error, setError] = useState('');

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    setError('');

                    if (formData.password !== formData.confirmPassword) {
                        setError('Passwords do not match');
                        return;
                    }

                    if (formData.password.length < 6) {
                        setError('Password must be at least 6 characters');
                        return;
                    }

                    const customerId = 'cust_' + Date.now();
                    const customerData = {
                        name: formData.name,
                        company: formData.company,
                        email: formData.email,
                        phone: formData.phone,
                        address: formData.address,
                        city: formData.city,
                        state: formData.state,
                        zip: formData.zip,
                        password: formData.password,
                        registeredAt: new Date().toISOString()
                    };

                    await DB.saveCustomer(customerId, customerData);
                    
                    setCurrentUser({ id: customerId, ...customerData });
                    setUserRole('customer');
                    localStorage.setItem('currentUser', JSON.stringify({ id: customerId, ...customerData }));
                    localStorage.setItem('userRole', 'customer');
                    setCurrentView('customer-dashboard');
                };

                return (
                    <div className="min-h-screen flex items-center justify-center px-4 py-8">
                        <div className="max-w-2xl w-full">
                            <button
                                onClick={() => setCurrentView('landing')}
                                className="mb-6 text-slate-400 hover:text-white transition flex items-center space-x-2"
                            >
                                <span>‚Üê</span>
                                <span>Back to Home</span>
                            </button>

                            <div className="bg-slate-900/80 backdrop-blur-lg border border-slate-800 rounded-2xl p-8 shadow-2xl">
                                <div className="text-center mb-8">
                                    <h2 className="text-3xl font-bold text-white">Create Your Account</h2>
                                    <p className="text-slate-400 mt-2">Join thousands of satisfied customers</p>
                                </div>

                                {error && (
                                    <div className="mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500 text-sm">
                                        {error}
                                    </div>
                                )}

                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Full Name *</label>
                                            <input
                                                type="text"
                                                value={formData.name}
                                                onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Company</label>
                                            <input
                                                type="text"
                                                value={formData.company}
                                                onChange={(e) => setFormData({...formData, company: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            />
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Email *</label>
                                            <input
                                                type="email"
                                                value={formData.email}
                                                onChange={(e) => setFormData({...formData, email: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Phone *</label>
                                            <input
                                                type="tel"
                                                value={formData.phone}
                                                onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Address *</label>
                                        <input
                                            type="text"
                                            value={formData.address}
                                            onChange={(e) => setFormData({...formData, address: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            required
                                        />
                                    </div>

                                    <div className="grid md:grid-cols-3 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">City *</label>
                                            <input
                                                type="text"
                                                value={formData.city}
                                                onChange={(e) => setFormData({...formData, city: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">State *</label>
                                            <input
                                                type="text"
                                                value={formData.state}
                                                onChange={(e) => setFormData({...formData, state: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">ZIP *</label>
                                            <input
                                                type="text"
                                                value={formData.zip}
                                                onChange={(e) => setFormData({...formData, zip: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Password *</label>
                                            <input
                                                type="password"
                                                value={formData.password}
                                                onChange={(e) => setFormData({...formData, password: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Confirm Password *</label>
                                            <input
                                                type="password"
                                                value={formData.confirmPassword}
                                                onChange={(e) => setFormData({...formData, confirmPassword: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <button
                                        type="submit"
                                        className="w-full py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition shadow-lg shadow-red-600/30 mt-6"
                                    >
                                        Create Account
                                    </button>
                                </form>

                                <div className="mt-6 text-center text-sm text-slate-400">
                                    Already have an account?{' '}
                                    <button
                                        onClick={() => setCurrentView('login')}
                                        className="text-red-500 hover:text-red-400 font-semibold"
                                    >
                                        Sign in
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ============================================
            // REGISTER TECHNICIAN PAGE
            // ============================================
            const RegisterTechnicianPage = () => {
                const [formData, setFormData] = useState({
                    name: '',
                    email: '',
                    phone: '',
                    address: '',
                    city: '',
                    state: '',
                    zip: '',
                    specialty: 'IT Support',
                    hourlyRate: '',
                    experience: '',
                    certifications: '',
                    skills: '',
                    bio: '',
                    availability: 'full-time',
                    password: '',
                    confirmPassword: ''
                });
                const [error, setError] = useState('');

                const specialtyOptions = [
                    'IT Support',
                    'Network Engineer',
                    'Web Developer',
                    'Software Engineer',
                    'Database Administrator',
                    'Cybersecurity Specialist',
                    'Cloud Engineer',
                    'DevOps Engineer',
                    'UI/UX Designer',
                    'Mobile App Developer'
                ];

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    setError('');

                    if (formData.password !== formData.confirmPassword) {
                        setError('Passwords do not match');
                        return;
                    }

                    if (formData.password.length < 6) {
                        setError('Password must be at least 6 characters');
                        return;
                    }

                    const techId = 'tech_' + Date.now();
                    const techData = {
                        name: formData.name,
                        email: formData.email,
                        phone: formData.phone,
                        address: formData.address,
                        city: formData.city,
                        state: formData.state,
                        zip: formData.zip,
                        specialty: formData.specialty,
                        hourlyRate: parseFloat(formData.hourlyRate),
                        experience: formData.experience,
                        certifications: formData.certifications,
                        skills: formData.skills.split(',').map(s => s.trim()),
                        bio: formData.bio,
                        availability: formData.availability,
                        password: formData.password,
                        rating: 5.0,
                        completedJobs: 0,
                        status: 'available',
                        registeredAt: new Date().toISOString()
                    };

                    await DB.saveTechnician(techId, techData);
                    
                    setCurrentUser({ id: techId, ...techData });
                    setUserRole('technician');
                    localStorage.setItem('currentUser', JSON.stringify({ id: techId, ...techData }));
                    localStorage.setItem('userRole', 'technician');
                    setCurrentView('technician-dashboard');
                };

                return (
                    <div className="min-h-screen flex items-center justify-center px-4 py-8">
                        <div className="max-w-3xl w-full">
                            <button
                                onClick={() => setCurrentView('landing')}
                                className="mb-6 text-slate-400 hover:text-white transition flex items-center space-x-2"
                            >
                                <span>‚Üê</span>
                                <span>Back to Home</span>
                            </button>

                            <div className="bg-slate-900/80 backdrop-blur-lg border border-slate-800 rounded-2xl p-8 shadow-2xl">
                                <div className="text-center mb-8">
                                    <h2 className="text-3xl font-bold text-white">Join as a Professional</h2>
                                    <p className="text-slate-400 mt-2">Start getting hired for your expertise</p>
                                </div>

                                {error && (
                                    <div className="mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500 text-sm">
                                        {error}
                                    </div>
                                )}

                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Full Name *</label>
                                            <input
                                                type="text"
                                                value={formData.name}
                                                onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Specialty *</label>
                                            <select
                                                value={formData.specialty}
                                                onChange={(e) => setFormData({...formData, specialty: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            >
                                                {specialtyOptions.map(opt => (
                                                    <option key={opt} value={opt}>{opt}</option>
                                                ))}
                                            </select>
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Email *</label>
                                            <input
                                                type="email"
                                                value={formData.email}
                                                onChange={(e) => setFormData({...formData, email: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Phone *</label>
                                            <input
                                                type="tel"
                                                value={formData.phone}
                                                onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Address *</label>
                                        <input
                                            type="text"
                                            value={formData.address}
                                            onChange={(e) => setFormData({...formData, address: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            required
                                        />
                                    </div>

                                    <div className="grid md:grid-cols-3 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">City *</label>
                                            <input
                                                type="text"
                                                value={formData.city}
                                                onChange={(e) => setFormData({...formData, city: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">State *</label>
                                            <input
                                                type="text"
                                                value={formData.state}
                                                onChange={(e) => setFormData({...formData, state: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">ZIP *</label>
                                            <input
                                                type="text"
                                                value={formData.zip}
                                                onChange={(e) => setFormData({...formData, zip: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Hourly Rate ($) *</label>
                                            <input
                                                type="number"
                                                value={formData.hourlyRate}
                                                onChange={(e) => setFormData({...formData, hourlyRate: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Years of Experience *</label>
                                            <input
                                                type="text"
                                                value={formData.experience}
                                                onChange={(e) => setFormData({...formData, experience: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                placeholder="e.g., 5 years"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Skills (comma-separated) *</label>
                                        <input
                                            type="text"
                                            value={formData.skills}
                                            onChange={(e) => setFormData({...formData, skills: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            placeholder="e.g., JavaScript, React, Node.js"
                                            required
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Certifications</label>
                                        <input
                                            type="text"
                                            value={formData.certifications}
                                            onChange={(e) => setFormData({...formData, certifications: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            placeholder="e.g., AWS Certified, CompTIA A+"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Professional Bio *</label>
                                        <textarea
                                            value={formData.bio}
                                            onChange={(e) => setFormData({...formData, bio: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            rows="3"
                                            placeholder="Tell clients about your expertise and experience"
                                            required
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Availability *</label>
                                        <select
                                            value={formData.availability}
                                            onChange={(e) => setFormData({...formData, availability: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            required
                                        >
                                            <option value="full-time">Full-time</option>
                                            <option value="part-time">Part-time</option>
                                            <option value="contract">Contract Only</option>
                                            <option value="weekends">Weekends Only</option>
                                        </select>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Password *</label>
                                            <input
                                                type="password"
                                                value={formData.password}
                                                onChange={(e) => setFormData({...formData, password: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Confirm Password *</label>
                                            <input
                                                type="password"
                                                value={formData.confirmPassword}
                                                onChange={(e) => setFormData({...formData, confirmPassword: e.target.value})}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <button
                                        type="submit"
                                        className="w-full py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition shadow-lg shadow-red-600/30 mt-6"
                                    >
                                        Create Professional Account
                                    </button>
                                </form>

                                <div className="mt-6 text-center text-sm text-slate-400">
                                    Already have an account?{' '}
                                    <button
                                        onClick={() => setCurrentView('login')}
                                        className="text-red-500 hover:text-red-400 font-semibold"
                                    >
                                        Sign in
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ============================================
            // CUSTOMER DASHBOARD
            // ============================================
            const CustomerDashboard = () => {
                const [requests, setRequests] = useState([]);
                const [contracts, setContracts] = useState([]);

                useEffect(() => {
                    loadData();
                }, []);

                const loadData = async () => {
                    const allRequests = await DB.getRequests();
                    const myRequests = Object.entries(allRequests)
                        .filter(([id, req]) => req.customerId === currentUser.id)
                        .map(([id, req]) => ({ id, ...req }));
                    setRequests(myRequests);

                    const allContracts = await DB.getContracts();
                    const myContracts = Object.entries(allContracts || {})
                        .filter(([id, contract]) => contract.customerId === currentUser.id)
                        .map(([id, contract]) => ({ id, ...contract }));
                    setContracts(myContracts);
                };

                const approveCompletion = async (requestId) => {
                    const rating = prompt('Rate the technician (1-5 stars):', '5');
                    const review = prompt('Leave a review (optional):');
                    
                    if (rating) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            status: 'completed',
                            customerRating: parseInt(rating),
                            customerReview: review,
                            completedAt: Date.now()
                        });
                        alert('Job approved and completed! Payment released to technician.');
                        loadData();
                    }
                };

                const cancelRequest = async (requestId) => {
                    if (confirm('Cancel this request?')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, { ...request, status: 'cancelled' });
                        alert('Request cancelled.');
                        loadData();
                    }
                };

                const acceptBudgetProposal = async (requestId) => {
                    if (confirm('Accept the proposed budget?')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            budget: request.proposedBudget,
                            status: 'pending',
                            proposedBudget: null,
                            originalBudget: null,
                            proposedBy: null,
                            budgetAcceptedAt: Date.now()
                        });
                        alert('Budget accepted! Request is now pending admin approval.');
                        loadData();
                    }
                };

                const rejectBudgetProposal = async (requestId) => {
                    if (confirm('Reject the proposed budget and cancel this request?')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            status: 'cancelled',
                            cancellationReason: 'Customer rejected budget proposal',
                            cancelledAt: Date.now()
                        });
                        alert('Request cancelled.');
                        loadData();
                    }
                };

                const counterOfferBudget = async (requestId, proposedBudget) => {
                    const counterOffer = prompt(`Admin proposed: $${proposedBudget}\nEnter your counter offer:`, proposedBudget);
                    if (counterOffer && !isNaN(counterOffer) && parseFloat(counterOffer) > 0) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            status: 'budget-counter-offer',
                            proposedBudget: parseFloat(counterOffer),
                            adminProposedBudget: request.proposedBudget,
                            proposedBy: 'customer',
                            counterOfferedAt: Date.now()
                        });
                        alert(`Counter offer sent to admin!\nAdmin proposed: $${proposedBudget}\nYour counter offer: $${counterOffer}`);
                        loadData();
                    }
                };

                const stats = {
                    pending: requests.filter(r => r.status === 'pending').length,
                    inProgress: requests.filter(r => r.status === 'in-progress').length,
                    completed: requests.filter(r => r.status === 'completed').length,
                    activeContracts: contracts.filter(c => c.status === 'active').length,
                    budgetNegotiation: requests.filter(r => r.status === 'budget-negotiation').length
                };

                return (
                    <div className="min-h-screen">
                        {/* Navigation */}
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <div className="flex items-center space-x-3">
                                        <div className="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                                            <span className="text-white font-bold text-xl">H</span>
                                        </div>
                                        <span className="text-xl font-bold text-white">Dashboard</span>
                                    </div>
                                    <div className="flex items-center space-x-4">
                                        <span className="text-slate-400">üë§ {currentUser.name}</span>
                                        <button
                                            onClick={handleLogout}
                                            className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition"
                                        >
                                            Logout
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                {/* Welcome Section */}
                                <div className="mb-8">
                                    <h1 className="text-4xl font-bold text-white mb-2">
                                        Welcome back, {currentUser.name}!
                                    </h1>
                                    <p className="text-slate-400">Manage your IT services and contractors</p>
                                </div>

                                {/* Stats */}
                                <div className="grid grid-cols-2 md:grid-cols-5 gap-6 mb-8">
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-yellow-500 mb-1">{stats.pending}</div>
                                        <div className="text-slate-400 text-sm">Pending Requests</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-blue-500 mb-1">{stats.inProgress}</div>
                                        <div className="text-slate-400 text-sm">In Progress</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-green-500 mb-1">{stats.completed}</div>
                                        <div className="text-slate-400 text-sm">Completed</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-purple-500 mb-1">{stats.activeContracts}</div>
                                        <div className="text-slate-400 text-sm">Active Contracts</div>
                                    </div>
                                    {stats.budgetNegotiation > 0 && (
                                        <div className="stat-card p-6 rounded-xl border-2 border-yellow-500/50">
                                            <div className="text-3xl font-bold text-yellow-500 mb-1">{stats.budgetNegotiation}</div>
                                            <div className="text-slate-400 text-sm">‚ö†Ô∏è Needs Response</div>
                                        </div>
                                    )}
                                </div>

                                {/* Budget Negotiation Section - Show at top if any exist */}
                                {requests.filter(r => r.status === 'budget-negotiation').length > 0 && (
                                    <div className="mb-8">
                                        <h2 className="text-2xl font-bold text-yellow-500 mb-4 flex items-center">
                                            <span className="mr-2">üí∞</span>
                                            Budget Proposals Pending Your Response
                                        </h2>
                                        <div className="space-y-4">
                                            {requests.filter(r => r.status === 'budget-negotiation').map(request => (
                                                <div key={request.id} className="bg-gradient-to-br from-yellow-500/10 to-amber-500/10 border-2 border-yellow-500/40 p-6 rounded-xl">
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-2 mb-3">
                                                                <h3 className="text-xl font-bold text-white">{request.issueType}</h3>
                                                                <span className="px-3 py-1 rounded-full text-xs font-semibold bg-yellow-500/20 text-yellow-500">
                                                                    ‚ö†Ô∏è Budget Negotiation
                                                                </span>
                                                            </div>
                                                            
                                                            <p className="text-slate-300 text-sm mb-4">{request.description}</p>
                                                            
                                                            <div className="bg-slate-900/50 p-4 rounded-lg mb-4">
                                                                <div className="grid md:grid-cols-2 gap-4">
                                                                    <div>
                                                                        <span className="text-slate-400 text-sm">Original Budget:</span>
                                                                        <div className="text-xl font-bold text-slate-300">${request.originalBudget || request.budget}</div>
                                                                    </div>
                                                                    <div>
                                                                        <span className="text-slate-400 text-sm">Admin Proposed:</span>
                                                                        <div className="text-2xl font-bold text-yellow-500">${request.proposedBudget}</div>
                                                                    </div>
                                                                </div>
                                                                <div className="mt-3 text-xs text-slate-500">
                                                                    Proposed {new Date(request.proposedAt).toLocaleString()}
                                                                </div>
                                                            </div>

                                                            <div className="text-sm text-slate-400 mb-4">
                                                                <p>üí° The admin has proposed a budget adjustment for this request.</p>
                                                                <p className="mt-1">You can accept, reject, or make a counter offer.</p>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div className="grid md:grid-cols-3 gap-3 mt-4">
                                                        <button
                                                            onClick={() => acceptBudgetProposal(request.id)}
                                                            className="px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm font-semibold"
                                                        >
                                                            ‚úì Accept ${request.proposedBudget}
                                                        </button>
                                                        <button
                                                            onClick={() => counterOfferBudget(request.id, request.proposedBudget)}
                                                            className="px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm font-semibold"
                                                        >
                                                            üí¨ Counter Offer
                                                        </button>
                                                        <button
                                                            onClick={() => rejectBudgetProposal(request.id)}
                                                            className="px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm font-semibold"
                                                        >
                                                            ‚úï Reject & Cancel
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* Quick Actions */}
                                <div className="grid md:grid-cols-2 gap-6 mb-12">
                                    <div
                                        onClick={() => setCurrentView('customer-quick-fix')}
                                        className="service-card p-8 rounded-2xl cursor-pointer"
                                    >
                                        <div className="flex items-start justify-between mb-4">
                                            <div className="w-14 h-14 bg-red-600/20 rounded-xl flex items-center justify-center">
                                                <span className="text-3xl">‚ö°</span>
                                            </div>
                                            <span className="text-red-500 text-sm font-semibold">Quick Service</span>
                                        </div>
                                        <h3 className="text-2xl font-bold text-white mb-2">Quick Fix</h3>
                                        <p className="text-slate-400">Find local technicians for immediate IT support</p>
                                    </div>

                                    <div
                                        onClick={() => setCurrentView('customer-hire-contractor')}
                                        className="service-card p-8 rounded-2xl cursor-pointer"
                                    >
                                        <div className="flex items-start justify-between mb-4">
                                            <div className="w-14 h-14 bg-blue-600/20 rounded-xl flex items-center justify-center">
                                                <span className="text-3xl">üë•</span>
                                            </div>
                                            <span className="text-blue-500 text-sm font-semibold">Long-term</span>
                                        </div>
                                        <h3 className="text-2xl font-bold text-white mb-2">Hire a Contractor</h3>
                                        <p className="text-slate-400">Browse professionals for ongoing projects</p>
                                    </div>
                                </div>

                                {/* Recent Activity */}
                                <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-6">
                                    <h2 className="text-2xl font-bold text-white mb-6">Recent Requests</h2>
                                    {requests.length === 0 ? (
                                        <div className="text-center py-12 text-slate-400">
                                            <div className="text-6xl mb-4">üìã</div>
                                            <p>No service requests yet</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            {requests.filter(r => r.status !== 'budget-negotiation').slice(0, 5).map(request => (
                                                <div key={request.id} className="profile-card p-4 rounded-xl">
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1">
                                                            <div className="flex items-center space-x-3 mb-2">
                                                                <h3 className="font-semibold text-white">{request.issueType}</h3>
                                                                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                                    request.status === 'pending' ? 'bg-yellow-500/20 text-yellow-500' :
                                                                    request.status === 'approved' ? 'bg-blue-500/20 text-blue-500' :
                                                                    request.status === 'in-progress' ? 'bg-purple-500/20 text-purple-500' :
                                                                    request.status === 'awaiting-review' ? 'bg-orange-500/20 text-orange-500' :
                                                                    request.status === 'completed' ? 'bg-green-500/20 text-green-500' :
                                                                    request.status === 'budget-counter-offer' ? 'bg-blue-500/20 text-blue-500' :
                                                                    'bg-slate-500/20 text-slate-400'
                                                                }`}>
                                                                    {request.status}
                                                                </span>
                                                            </div>
                                                            <p className="text-slate-400 text-sm">{request.description?.substring(0, 80)}...</p>
                                                            {request.technicianName && (
                                                                <p className="text-slate-500 text-sm mt-1">
                                                                    Technician: <span className="text-white">{request.technicianName}</span>
                                                                </p>
                                                            )}
                                                            <p className="text-slate-500 text-xs mt-1">{new Date(request.createdAt).toLocaleDateString()}</p>
                                                        </div>
                                                        <div className="text-right ml-4">
                                                            <div className="text-lg font-bold text-white">{request.priority}</div>
                                                            <div className="text-xs text-slate-400 mb-2">Priority</div>
                                                            
                                                            {request.status === 'awaiting-review' && (
                                                                <button
                                                                    onClick={() => approveCompletion(request.id)}
                                                                    className="px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-xs mt-2"
                                                                >
                                                                    ‚úì Approve & Review
                                                                </button>
                                                            )}
                                                            
                                                            {request.status === 'pending' && (
                                                                <button
                                                                    onClick={() => cancelRequest(request.id)}
                                                                    className="px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-xs mt-2"
                                                                >
                                                                    ‚úï Cancel
                                                                </button>
                                                            )}
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ============================================
            // CUSTOMER QUICK FIX - CREATE REQUEST
            // ============================================
            const CustomerQuickFix = () => {
                const [formData, setFormData] = useState({
                    issueType: '',
                    description: '',
                    priority: 'medium',
                    budget: ''
                });

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    
                    const requestId = Date.now().toString();
                    const newRequest = {
                        ...formData,
                        customerId: currentUser.id,
                        customerName: currentUser.name,
                        customerEmail: currentUser.email,
                        customerPhone: currentUser.phone,
                        city: currentUser.city,
                        state: currentUser.state,
                        status: 'pending',
                        createdAt: Date.now()
                    };

                    await DB.saveRequest(requestId, newRequest);
                    alert('Request submitted! Waiting for admin approval.');
                    setCurrentView('customer-dashboard');
                };

                return (
                    <div className="min-h-screen">
                        {/* Navigation */}
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <button
                                        onClick={() => setCurrentView('customer-dashboard')}
                                        className="text-slate-400 hover:text-white transition flex items-center space-x-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back</span>
                                    </button>
                                    <span className="text-xl font-bold text-white">Create Quick Fix Request</span>
                                    <div className="w-20"></div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-3xl mx-auto">
                                <div className="profile-card p-8 rounded-2xl">
                                    <div className="flex items-center space-x-3 mb-6">
                                        <div className="w-14 h-14 bg-red-600/20 rounded-xl flex items-center justify-center">
                                            <span className="text-3xl">‚ö°</span>
                                        </div>
                                        <div>
                                            <h1 className="text-3xl font-bold text-white">Quick Fix Request</h1>
                                            <p className="text-slate-400">Get immediate IT support</p>
                                        </div>
                                    </div>

                                    <form onSubmit={handleSubmit} className="space-y-6">
                                        <div>
                                            <label className="block text-slate-400 mb-2 font-semibold">Issue Type *</label>
                                            <select
                                                value={formData.issueType}
                                                onChange={(e) => setFormData({...formData, issueType: e.target.value})}
                                                className="w-full px-4 py-3 bg-slate-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                                required
                                            >
                                                <option value="">Select issue type</option>
                                                <option value="Network Issues">Network Issues</option>
                                                <option value="Computer Repair">Computer Repair</option>
                                                <option value="Software Installation">Software Installation</option>
                                                <option value="Virus Removal">Virus Removal</option>
                                                <option value="Hardware Setup">Hardware Setup</option>
                                                <option value="Printer Issues">Printer Issues</option>
                                                <option value="Email Problems">Email Problems</option>
                                                <option value="Data Recovery">Data Recovery</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-slate-400 mb-2 font-semibold">Description *</label>
                                            <textarea
                                                value={formData.description}
                                                onChange={(e) => setFormData({...formData, description: e.target.value})}
                                                className="w-full px-4 py-3 bg-slate-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                                rows="5"
                                                placeholder="Please describe your issue in detail..."
                                                required
                                            ></textarea>
                                        </div>

                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <label className="block text-slate-400 mb-2 font-semibold">Priority *</label>
                                                <select
                                                    value={formData.priority}
                                                    onChange={(e) => setFormData({...formData, priority: e.target.value})}
                                                    className="w-full px-4 py-3 bg-slate-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                                    required
                                                >
                                                    <option value="low">Low - Can wait</option>
                                                    <option value="medium">Medium - Within a few days</option>
                                                    <option value="high">High - Within 24 hours</option>
                                                    <option value="urgent">Urgent - ASAP</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label className="block text-slate-400 mb-2 font-semibold">Budget ($) *</label>
                                                <input
                                                    type="number"
                                                    value={formData.budget}
                                                    onChange={(e) => setFormData({...formData, budget: e.target.value})}
                                                    className="w-full px-4 py-3 bg-slate-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                                    placeholder="e.g., 100"
                                                    min="0"
                                                    required
                                                />
                                            </div>
                                        </div>

                                        <div className="bg-slate-800/50 border border-slate-700 rounded-xl p-4">
                                            <h3 className="text-white font-semibold mb-2">üìç Service Location</h3>
                                            <p className="text-slate-400 text-sm">
                                                {currentUser.city}, {currentUser.state}
                                            </p>
                                        </div>

                                        <button
                                            type="submit"
                                            className="w-full py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold text-lg transition"
                                        >
                                            Submit Request
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // Quick Fix Request Form Component
            const QuickFixRequestForm = ({ tech, customer, onClose, onSubmit }) => {
                const [formData, setFormData] = useState({
                    issueType: 'Hardware Issue',
                    priority: 'medium',
                    description: '',
                    preferredDate: '',
                    preferredTime: ''
                });

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    
                    const requestId = 'req_' + Date.now();
                    const requestData = {
                        customerId: customer.id,
                        customerName: customer.name,
                        customerEmail: customer.email,
                        customerPhone: customer.phone,
                        technicianId: tech.id,
                        technicianName: tech.name,
                        issueType: formData.issueType,
                        priority: formData.priority,
                        description: formData.description,
                        preferredDate: formData.preferredDate,
                        preferredTime: formData.preferredTime,
                        status: 'pending',
                        createdAt: new Date().toISOString()
                    };

                    await DB.saveRequest(requestId, requestData);
                    onSubmit();
                };

                return (
                    <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                        <div className="bg-slate-900 border border-slate-800 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                            <div className="flex items-center justify-between mb-6">
                                <h2 className="text-2xl font-bold text-white">Request Service</h2>
                                <button
                                    onClick={onClose}
                                    className="text-slate-400 hover:text-white text-2xl"
                                >
                                    √ó
                                </button>
                            </div>

                            <div className="bg-slate-800 p-4 rounded-lg mb-6">
                                <div className="flex items-center space-x-3">
                                    <div className="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-white font-bold">
                                        {tech.name.charAt(0)}
                                    </div>
                                    <div>
                                        <div className="font-semibold text-white">{tech.name}</div>
                                        <div className="text-sm text-slate-400">{tech.specialty} ‚Ä¢ ${tech.hourlyRate}/hr</div>
                                    </div>
                                </div>
                            </div>

                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">Issue Type *</label>
                                    <select
                                        value={formData.issueType}
                                        onChange={(e) => setFormData({...formData, issueType: e.target.value})}
                                        className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                        required
                                    >
                                        <option>Hardware Issue</option>
                                        <option>Software Problem</option>
                                        <option>Network Connectivity</option>
                                        <option>System Installation</option>
                                        <option>Security Concern</option>
                                        <option>Other</option>
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">Priority *</label>
                                    <select
                                        value={formData.priority}
                                        onChange={(e) => setFormData({...formData, priority: e.target.value})}
                                        className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                        required
                                    >
                                        <option value="low">Low - Can wait a few days</option>
                                        <option value="medium">Medium - Within 24-48 hours</option>
                                        <option value="high">High - As soon as possible</option>
                                        <option value="critical">Critical - Urgent</option>
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">Description *</label>
                                    <textarea
                                        value={formData.description}
                                        onChange={(e) => setFormData({...formData, description: e.target.value})}
                                        className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                        rows="4"
                                        placeholder="Describe the issue in detail..."
                                        required
                                    />
                                </div>

                                <div className="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Preferred Date</label>
                                        <input
                                            type="date"
                                            value={formData.preferredDate}
                                            onChange={(e) => setFormData({...formData, preferredDate: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Preferred Time</label>
                                        <input
                                            type="time"
                                            value={formData.preferredTime}
                                            onChange={(e) => setFormData({...formData, preferredTime: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                        />
                                    </div>
                                </div>

                                <div className="flex gap-3 pt-4">
                                    <button
                                        type="submit"
                                        className="flex-1 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition"
                                    >
                                        Submit Request
                                    </button>
                                    <button
                                        type="button"
                                        onClick={onClose}
                                        className="flex-1 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                );
            };

            // ============================================
            // CUSTOMER HIRE CONTRACTOR (All Professionals)
            // ============================================
            const CustomerHireContractor = () => {
                const [technicians, setTechnicians] = useState([]);
                const [filteredTechs, setFilteredTechs] = useState([]);
                const [searchTerm, setSearchTerm] = useState('');
                const [selectedSpecialty, setSelectedSpecialty] = useState('All');
                const [sortBy, setSortBy] = useState('rating');
                const [selectedTech, setSelectedTech] = useState(null);
                const [showContractForm, setShowContractForm] = useState(false);

                const specialties = ['All', 'IT Support', 'Network Engineer', 'Web Developer', 'Software Engineer', 
                                     'Database Administrator', 'Cybersecurity Specialist', 'Cloud Engineer', 
                                     'DevOps Engineer', 'UI/UX Designer', 'Mobile App Developer'];

                useEffect(() => {
                    loadTechnicians();
                }, []);

                useEffect(() => {
                    filterAndSortTechnicians();
                }, [searchTerm, selectedSpecialty, sortBy, technicians]);

                const loadTechnicians = async () => {
                    const allTechs = await DB.getTechnicians();
                    const techArray = Object.entries(allTechs).map(([id, tech]) => ({ id, ...tech }));
                    setTechnicians(techArray);
                };

                const filterAndSortTechnicians = () => {
                    let filtered = [...technicians];

                    // Filter by specialty
                    if (selectedSpecialty !== 'All') {
                        filtered = filtered.filter(tech => tech.specialty === selectedSpecialty);
                    }

                    // Filter by search term
                    if (searchTerm) {
                        filtered = filtered.filter(tech =>
                            tech.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                            tech.specialty.toLowerCase().includes(searchTerm.toLowerCase()) ||
                            tech.skills?.some(skill => skill.toLowerCase().includes(searchTerm.toLowerCase()))
                        );
                    }

                    // Sort
                    filtered.sort((a, b) => {
                        if (sortBy === 'rating') return (b.rating || 0) - (a.rating || 0);
                        if (sortBy === 'price-low') return (a.hourlyRate || 0) - (b.hourlyRate || 0);
                        if (sortBy === 'price-high') return (b.hourlyRate || 0) - (a.hourlyRate || 0);
                        if (sortBy === 'experience') return (b.completedJobs || 0) - (a.completedJobs || 0);
                        return 0;
                    });

                    setFilteredTechs(filtered);
                };

                const handleHireTech = (tech) => {
                    setSelectedTech(tech);
                    setShowContractForm(true);
                };

                return (
                    <div className="min-h-screen">
                        {/* Navigation */}
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <button
                                        onClick={() => setCurrentView('customer-dashboard')}
                                        className="text-slate-400 hover:text-white transition flex items-center space-x-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back</span>
                                    </button>
                                    <span className="text-xl font-bold text-white">Hire a Contractor</span>
                                    <div className="w-20"></div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <div className="mb-8">
                                    <h1 className="text-4xl font-bold text-white mb-2">Browse Professional Contractors</h1>
                                    <p className="text-slate-400">Find the perfect match for your project ‚Ä¢ {filteredTechs.length} professionals available</p>
                                </div>

                                {/* Filters */}
                                <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 mb-8">
                                    <div className="grid md:grid-cols-3 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Search</label>
                                            <input
                                                type="text"
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                placeholder="Search by name, skill, or specialty..."
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-red-600 focus:outline-none transition"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Specialty</label>
                                            <select
                                                value={selectedSpecialty}
                                                onChange={(e) => setSelectedSpecialty(e.target.value)}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            >
                                                {specialties.map(spec => (
                                                    <option key={spec} value={spec}>{spec}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-300 mb-2">Sort By</label>
                                            <select
                                                value={sortBy}
                                                onChange={(e) => setSortBy(e.target.value)}
                                                className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-red-600 focus:outline-none transition"
                                            >
                                                <option value="rating">Highest Rated</option>
                                                <option value="price-low">Price: Low to High</option>
                                                <option value="price-high">Price: High to Low</option>
                                                <option value="experience">Most Experience</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Professionals Grid */}
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {filteredTechs.length === 0 ? (
                                        <div className="col-span-full text-center py-16 text-slate-400">
                                            <div className="text-6xl mb-4">üîç</div>
                                            <p>No professionals match your criteria</p>
                                        </div>
                                    ) : (
                                        filteredTechs.map(tech => (
                                            <div key={tech.id} className="profile-card p-6 rounded-xl">
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="w-16 h-16 bg-gradient-to-br from-red-600 to-red-800 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg">
                                                        {tech.name.charAt(0)}
                                                    </div>
                                                    <span className="skill-badge">{tech.specialty}</span>
                                                </div>

                                                <h3 className="text-xl font-bold text-white mb-1">{tech.name}</h3>
                                                <p className="text-slate-400 text-sm mb-3">
                                                    üìç {tech.city}, {tech.state}
                                                </p>

                                                <div className="flex items-center space-x-4 mb-4 text-sm">
                                                    <div className="flex items-center space-x-1">
                                                        <span className="text-yellow-500">‚≠ê</span>
                                                        <span className="text-white font-semibold">{tech.rating?.toFixed(1) || '5.0'}</span>
                                                    </div>
                                                    <div className="text-slate-400">
                                                        {tech.completedJobs || 0} jobs
                                                    </div>
                                                </div>

                                                <div className="mb-4">
                                                    <div className="text-2xl font-bold text-green-500 mb-1">
                                                        ${tech.hourlyRate}/hr
                                                    </div>
                                                    <div className="text-xs text-slate-400">{tech.availability}</div>
                                                </div>

                                                <p className="text-slate-400 text-sm mb-4 line-clamp-3">
                                                    {tech.bio}
                                                </p>

                                                {tech.experience && (
                                                    <div className="text-sm text-slate-400 mb-4">
                                                        <span className="text-slate-300 font-semibold">Experience:</span> {tech.experience}
                                                    </div>
                                                )}

                                                {tech.certifications && (
                                                    <div className="text-sm text-slate-400 mb-4">
                                                        <span className="text-slate-300 font-semibold">Certs:</span> {tech.certifications}
                                                    </div>
                                                )}

                                                <div className="flex flex-wrap gap-2 mb-4">
                                                    {tech.skills?.slice(0, 4).map((skill, idx) => (
                                                        <span key={idx} className="skill-badge text-xs">
                                                            {skill}
                                                        </span>
                                                    ))}
                                                    {tech.skills?.length > 4 && (
                                                        <span className="skill-badge text-xs">+{tech.skills.length - 4} more</span>
                                                    )}
                                                </div>

                                                <button
                                                    onClick={() => handleHireTech(tech)}
                                                    className="w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition"
                                                >
                                                    Hire for Contract
                                                </button>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* Contract Form Modal */}
                        {showContractForm && selectedTech && (
                            <ContractForm 
                                tech={selectedTech}
                                customer={currentUser}
                                onClose={() => {
                                    setShowContractForm(false);
                                    setSelectedTech(null);
                                }}
                                onSubmit={() => {
                                    setShowContractForm(false);
                                    setSelectedTech(null);
                                    setCurrentView('customer-dashboard');
                                }}
                            />
                        )}
                    </div>
                );
            };

            // Contract Form Component
            const ContractForm = ({ tech, customer, onClose, onSubmit }) => {
                const [formData, setFormData] = useState({
                    projectTitle: '',
                    projectDescription: '',
                    duration: '1-3 months',
                    hoursPerWeek: '40',
                    budget: '',
                    startDate: '',
                    requirements: ''
                });

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    
                    const contractId = 'contract_' + Date.now();
                    const contractData = {
                        customerId: customer.id,
                        customerName: customer.name,
                        customerEmail: customer.email,
                        technicianId: tech.id,
                        technicianName: tech.name,
                        technicianRate: tech.hourlyRate,
                        projectTitle: formData.projectTitle,
                        projectDescription: formData.projectDescription,
                        duration: formData.duration,
                        hoursPerWeek: formData.hoursPerWeek,
                        budget: parseFloat(formData.budget),
                        startDate: formData.startDate,
                        requirements: formData.requirements,
                        status: 'pending-contractor-approval',
                        createdAt: new Date().toISOString()
                    };

                    await DB.saveContract(contractId, contractData);
                    alert('Contract proposal sent to contractor for approval!');
                    onSubmit();
                };

                return (
                    <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                        <div className="bg-slate-900 border border-slate-800 rounded-2xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                            <div className="flex items-center justify-between mb-6">
                                <h2 className="text-2xl font-bold text-white">Create Contract Proposal</h2>
                                <button
                                    onClick={onClose}
                                    className="text-slate-400 hover:text-white text-2xl"
                                >
                                    √ó
                                </button>
                            </div>

                            <div className="bg-slate-800 p-4 rounded-lg mb-6">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center space-x-3">
                                        <div className="w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-800 rounded-full flex items-center justify-center text-white font-bold">
                                            {tech.name.charAt(0)}
                                        </div>
                                        <div>
                                            <div className="font-semibold text-white">{tech.name}</div>
                                            <div className="text-sm text-slate-400">{tech.specialty}</div>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-xl font-bold text-green-500">${tech.hourlyRate}/hr</div>
                                        <div className="text-xs text-slate-400">{tech.availability}</div>
                                    </div>
                                </div>
                            </div>

                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">Project Title *</label>
                                    <input
                                        type="text"
                                        value={formData.projectTitle}
                                        onChange={(e) => setFormData({...formData, projectTitle: e.target.value})}
                                        className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                        placeholder="e.g., E-commerce Website Development"
                                        required
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">Project Description *</label>
                                    <textarea
                                        value={formData.projectDescription}
                                        onChange={(e) => setFormData({...formData, projectDescription: e.target.value})}
                                        className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                        rows="4"
                                        placeholder="Describe the project scope, goals, and deliverables..."
                                        required
                                    />
                                </div>

                                <div className="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Contract Duration *</label>
                                        <select
                                            value={formData.duration}
                                            onChange={(e) => setFormData({...formData, duration: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                            required
                                        >
                                            <option value="1-3 months">1-3 months</option>
                                            <option value="3-6 months">3-6 months</option>
                                            <option value="6-12 months">6-12 months</option>
                                            <option value="12+ months">12+ months</option>
                                            <option value="project-based">Project-based (flexible)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Hours Per Week *</label>
                                        <select
                                            value={formData.hoursPerWeek}
                                            onChange={(e) => setFormData({...formData, hoursPerWeek: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                            required
                                        >
                                            <option value="10">10 hours/week (Part-time)</option>
                                            <option value="20">20 hours/week (Half-time)</option>
                                            <option value="40">40 hours/week (Full-time)</option>
                                            <option value="flexible">Flexible hours</option>
                                        </select>
                                    </div>
                                </div>

                                <div className="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Total Budget ($) *</label>
                                        <input
                                            type="number"
                                            value={formData.budget}
                                            onChange={(e) => setFormData({...formData, budget: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                            placeholder="e.g., 5000"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">Start Date *</label>
                                        <input
                                            type="date"
                                            value={formData.startDate}
                                            onChange={(e) => setFormData({...formData, startDate: e.target.value})}
                                            className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                            required
                                        />
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">Specific Requirements</label>
                                    <textarea
                                        value={formData.requirements}
                                        onChange={(e) => setFormData({...formData, requirements: e.target.value})}
                                        className="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:border-blue-600 focus:outline-none transition"
                                        rows="3"
                                        placeholder="Any specific skills, technologies, or requirements..."
                                    />
                                </div>

                                <div className="bg-blue-500/10 border border-blue-500/30 rounded-lg p-4">
                                    <div className="text-sm text-blue-400 mb-2">üí° Estimated Contract Value</div>
                                    <div className="text-2xl font-bold text-white">
                                        ${formData.budget || '0'} total
                                    </div>
                                    {formData.hoursPerWeek && formData.hoursPerWeek !== 'flexible' && (
                                        <div className="text-sm text-slate-400 mt-1">
                                            ~{Math.floor(parseFloat(formData.budget || 0) / (parseFloat(formData.hoursPerWeek) * tech.hourlyRate))} weeks at {formData.hoursPerWeek} hours/week
                                        </div>
                                    )}
                                </div>

                                <div className="flex gap-3 pt-4">
                                    <button
                                        type="submit"
                                        className="flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition"
                                    >
                                        Send Proposal
                                    </button>
                                    <button
                                        type="button"
                                        onClick={onClose}
                                        className="flex-1 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                );
            };

            // ============================================
            // TECHNICIAN DASHBOARD (Simplified)
            // ============================================
            const TechnicianDashboard = () => {
                const [myRequests, setMyRequests] = useState([]);
                const [myContracts, setMyContracts] = useState([]);
                const [pendingContracts, setPendingContracts] = useState([]);
                const [availableJobs, setAvailableJobs] = useState([]);

                useEffect(() => {
                    loadData();
                }, []);

                const loadData = async () => {
                    const requests = await DB.getRequests();
                    const myReqs = Object.entries(requests)
                        .filter(([id, req]) => req.technicianId === currentUser.id)
                        .map(([id, req]) => ({ id, ...req }));
                    setMyRequests(myReqs);

                    // Load available jobs (approved requests without technician)
                    const available = Object.entries(requests)
                        .filter(([id, req]) => req.status === 'approved' && !req.technicianId)
                        .map(([id, req]) => ({ id, ...req }));
                    setAvailableJobs(available);

                    const contracts = await DB.getContracts();
                    
                    // Contracts pending my approval
                    const pending = Object.entries(contracts || {})
                        .filter(([id, cont]) => cont.technicianId === currentUser.id && cont.status === 'pending-contractor-approval')
                        .map(([id, cont]) => ({ id, ...cont }));
                    setPendingContracts(pending);
                    
                    // My active/approved contracts
                    const myConts = Object.entries(contracts || {})
                        .filter(([id, cont]) => cont.technicianId === currentUser.id && cont.status !== 'pending-contractor-approval')
                        .map(([id, cont]) => ({ id, ...cont }));
                    setMyContracts(myConts);
                };

                const acceptJob = async (jobId) => {
                    if (confirm('Accept this job?')) {
                        const requests = await DB.getRequests();
                        const request = requests[jobId];
                        await DB.saveRequest(jobId, {
                            ...request,
                            technicianId: currentUser.id,
                            technicianName: currentUser.name,
                            technicianEmail: currentUser.email,
                            technicianPhone: currentUser.phone,
                            status: 'in-progress',
                            acceptedAt: Date.now()
                        });
                        alert('Job accepted!');
                        loadData();
                    }
                };

                const acceptContract = async (contractId) => {
                    if (confirm('Accept this contract? It will be sent to admin for final approval.')) {
                        const contracts = await DB.getContracts();
                        const contract = contracts[contractId];
                        await DB.saveContract(contractId, {
                            ...contract,
                            status: 'pending-admin-approval',
                            contractorAcceptedAt: Date.now()
                        });
                        alert('Contract accepted! Sent to admin for approval.');
                        loadData();
                    }
                };

                const rejectContract = async (contractId) => {
                    const reason = prompt('Reason for rejection (optional):');
                    const contracts = await DB.getContracts();
                    const contract = contracts[contractId];
                    await DB.saveContract(contractId, {
                        ...contract,
                        status: 'rejected-by-contractor',
                        rejectionReason: reason,
                        rejectedAt: Date.now()
                    });
                    alert('Contract rejected.');
                    loadData();
                };

                const markComplete = async (requestId) => {
                    if (confirm('Mark this job as complete? Customer will be notified for approval.')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            status: 'awaiting-review',
                            techCompletedAt: Date.now()
                        });
                        alert('Job marked as complete! Awaiting customer approval.');
                        loadData();
                    }
                };

                return (
                    <div className="min-h-screen">
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <div className="flex items-center space-x-3">
                                        <div className="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                                            <span className="text-white font-bold text-xl">H</span>
                                        </div>
                                        <span className="text-xl font-bold text-white">Tech Dashboard</span>
                                    </div>
                                    <div className="flex items-center space-x-4">
                                        <span className="text-slate-400">üë§ {currentUser.name}</span>
                                        <button
                                            onClick={handleLogout}
                                            className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition"
                                        >
                                            Logout
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <h1 className="text-4xl font-bold text-white mb-8">Welcome, {currentUser.name}!</h1>

                                {/* Stats */}
                                <div className="grid grid-cols-4 gap-6 mb-8">
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-blue-500 mb-1">{myRequests.length}</div>
                                        <div className="text-slate-400 text-sm">My Active Jobs</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-purple-500 mb-1">{myContracts.length}</div>
                                        <div className="text-slate-400 text-sm">My Contracts</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-orange-500 mb-1">{pendingContracts.length}</div>
                                        <div className="text-slate-400 text-sm">Pending Approval</div>
                                    </div>
                                    <div className="stat-card p-6 rounded-xl">
                                        <div className="text-3xl font-bold text-green-500 mb-1">{availableJobs.length}</div>
                                        <div className="text-slate-400 text-sm">Available Jobs</div>
                                    </div>
                                </div>

                                {/* Pending Contract Approvals */}
                                {pendingContracts.length > 0 && (
                                    <div className="bg-slate-900/50 border border-orange-500/30 rounded-2xl p-6 mb-8">
                                        <h2 className="text-2xl font-bold text-white mb-4">‚è≥ Contracts Pending Your Approval</h2>
                                        <div className="space-y-3">
                                            {pendingContracts.map(contract => (
                                                <div key={contract.id} className="profile-card p-4 rounded-lg">
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1">
                                                            <div className="font-semibold text-white mb-1">{contract.projectTitle}</div>
                                                            <div className="text-sm text-slate-400 mb-2">{contract.projectDescription?.substring(0, 100)}...</div>
                                                            <div className="text-xs text-slate-500 space-y-1">
                                                                <div>Customer: {contract.customerName}</div>
                                                                <div>Duration: {contract.duration} ‚Ä¢ {contract.hoursPerWeek} hrs/week</div>
                                                                <div>Start: {contract.startDate}</div>
                                                            </div>
                                                        </div>
                                                        <div className="ml-4 text-right">
                                                            <div className="text-green-500 font-bold mb-3">${contract.budget}</div>
                                                            <div className="space-y-2">
                                                                <button
                                                                    onClick={() => acceptContract(contract.id)}
                                                                    className="w-full px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-xs"
                                                                >
                                                                    ‚úì Accept
                                                                </button>
                                                                <button
                                                                    onClick={() => rejectContract(contract.id)}
                                                                    className="w-full px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-xs"
                                                                >
                                                                    ‚úï Reject
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* Available Jobs */}
                                {availableJobs.length > 0 && (
                                    <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 mb-8">
                                        <h2 className="text-2xl font-bold text-white mb-4">Available Quick Fix Jobs</h2>
                                        <div className="space-y-3">
                                            {availableJobs.slice(0, 3).map(job => (
                                                <div key={job.id} className="profile-card p-4 rounded-lg">
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1">
                                                            <div className="font-semibold text-white mb-1">{job.issueType}</div>
                                                            <div className="text-sm text-slate-400 mb-1">{job.description?.substring(0, 100)}...</div>
                                                            <div className="text-xs text-slate-500">
                                                                {job.city}, {job.state} ‚Ä¢ Priority: {job.priority}
                                                            </div>
                                                        </div>
                                                        <div className="ml-4 text-right">
                                                            <div className="text-green-500 font-bold mb-2">${job.budget}</div>
                                                            <button
                                                                onClick={() => acceptJob(job.id)}
                                                                className="px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-xs"
                                                            >
                                                                Accept Job
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-6">
                                        <h2 className="text-2xl font-bold text-white mb-4">My Quick Fix Requests</h2>
                                        {myRequests.length === 0 ? (
                                            <p className="text-slate-400">No requests yet</p>
                                        ) : (
                                            <div className="space-y-3">
                                                {myRequests.map(req => (
                                                    <div key={req.id} className="profile-card p-4 rounded-lg">
                                                        <div className="flex items-start justify-between mb-2">
                                                            <div className="flex-1">
                                                                <div className="font-semibold text-white">{req.issueType}</div>
                                                                <div className="text-sm text-slate-400">{req.customerName}</div>
                                                                <div className="text-xs text-slate-500">{req.customerPhone}</div>
                                                            </div>
                                                            <span className={`inline-block px-2 py-1 rounded text-xs ${
                                                                req.status === 'pending' ? 'bg-yellow-500/20 text-yellow-500' :
                                                                req.status === 'in-progress' ? 'bg-blue-500/20 text-blue-500' :
                                                                req.status === 'awaiting-review' ? 'bg-orange-500/20 text-orange-500' :
                                                                'bg-green-500/20 text-green-500'
                                                            }`}>
                                                                {req.status}
                                                            </span>
                                                        </div>
                                                        {req.status === 'in-progress' && (
                                                            <button
                                                                onClick={() => markComplete(req.id)}
                                                                className="w-full mt-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm"
                                                            >
                                                                ‚úì Mark Complete
                                                            </button>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>

                                    <div className="bg-slate-900/50 border border-slate-800 rounded-2xl p-6">
                                        <h2 className="text-2xl font-bold text-white mb-4">My Contracts</h2>
                                        {myContracts.length === 0 ? (
                                            <p className="text-slate-400">No active contracts</p>
                                        ) : (
                                            <div className="space-y-3">
                                                {myContracts.map(contract => (
                                                    <div key={contract.id} className="profile-card p-4 rounded-lg">
                                                        <div className="font-semibold text-white">{contract.projectTitle}</div>
                                                        <div className="text-sm text-slate-400">{contract.customerName}</div>
                                                        <div className="text-green-500 font-bold mt-1">${contract.budget}</div>
                                                        <span className={`inline-block px-2 py-1 rounded text-xs mt-2 ${
                                                            contract.status === 'pending-admin-approval' ? 'bg-yellow-500/20 text-yellow-500' :
                                                            contract.status === 'active' ? 'bg-green-500/20 text-green-500' :
                                                            'bg-slate-500/20 text-slate-400'
                                                        }`}>
                                                            {contract.status}
                                                        </span>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ============================================
            // ADMIN DASHBOARD
            // ============================================
            const AdminDashboard = () => {
                const [stats, setStats] = useState({
                    totalCustomers: 0,
                    totalTechnicians: 0,
                    totalRequests: 0,
                    totalContracts: 0,
                    pendingRequests: 0,
                    activeContracts: 0
                });

                useEffect(() => {
                    loadStats();
                }, []);

                const loadStats = async () => {
                    const customers = await DB.getCustomers();
                    const technicians = await DB.getTechnicians();
                    const requests = await DB.getRequests();
                    const contracts = await DB.getContracts();

                    const requestsArray = Object.values(requests);
                    const contractsArray = Object.values(contracts || {});

                    setStats({
                        totalCustomers: Object.keys(customers).length,
                        totalTechnicians: Object.keys(technicians).length,
                        totalRequests: requestsArray.length,
                        totalContracts: contractsArray.length,
                        pendingRequests: requestsArray.filter(r => r.status === 'pending').length,
                        activeContracts: contractsArray.filter(c => c.status === 'active').length
                    });
                };

                return (
                    <div className="min-h-screen">
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <div className="flex items-center space-x-3">
                                        <div className="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                                            <span className="text-white font-bold text-xl">H</span>
                                        </div>
                                        <span className="text-xl font-bold text-white">Admin Dashboard</span>
                                    </div>
                                    <div className="flex items-center space-x-4">
                                        <span className="text-slate-400">üëë {currentUser.name}</span>
                                        <button
                                            onClick={handleLogout}
                                            className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition"
                                        >
                                            Logout
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <h1 className="text-4xl font-bold text-white mb-8">Admin Control Panel</h1>

                                {/* Stats */}
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8">
                                    <div className="stat-card p-4 rounded-xl">
                                        <div className="text-2xl font-bold text-blue-500 mb-1">{stats.totalCustomers}</div>
                                        <div className="text-slate-400 text-xs">Customers</div>
                                    </div>
                                    <div className="stat-card p-4 rounded-xl">
                                        <div className="text-2xl font-bold text-purple-500 mb-1">{stats.totalTechnicians}</div>
                                        <div className="text-slate-400 text-xs">Technicians</div>
                                    </div>
                                    <div className="stat-card p-4 rounded-xl">
                                        <div className="text-2xl font-bold text-yellow-500 mb-1">{stats.totalRequests}</div>
                                        <div className="text-slate-400 text-xs">Total Requests</div>
                                    </div>
                                    <div className="stat-card p-4 rounded-xl">
                                        <div className="text-2xl font-bold text-red-500 mb-1">{stats.pendingRequests}</div>
                                        <div className="text-slate-400 text-xs">Pending</div>
                                    </div>
                                    <div className="stat-card p-4 rounded-xl">
                                        <div className="text-2xl font-bold text-green-500 mb-1">{stats.totalContracts}</div>
                                        <div className="text-slate-400 text-xs">Contracts</div>
                                    </div>
                                    <div className="stat-card p-4 rounded-xl">
                                        <div className="text-2xl font-bold text-cyan-500 mb-1">{stats.activeContracts}</div>
                                        <div className="text-slate-400 text-xs">Active</div>
                                    </div>
                                </div>

                                {/* Quick Actions */}
                                <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    <button
                                        onClick={() => setCurrentView('admin-customers')}
                                        className="service-card p-6 rounded-xl text-left"
                                    >
                                        <div className="text-3xl mb-3">üë•</div>
                                        <h3 className="text-lg font-bold text-white mb-1">Manage Customers</h3>
                                        <p className="text-slate-400 text-sm">View and edit customer accounts</p>
                                    </button>

                                    <button
                                        onClick={() => setCurrentView('admin-technicians')}
                                        className="service-card p-6 rounded-xl text-left"
                                    >
                                        <div className="text-3xl mb-3">üîß</div>
                                        <h3 className="text-lg font-bold text-white mb-1">Manage Technicians</h3>
                                        <p className="text-slate-400 text-sm">View and edit professional profiles</p>
                                    </button>

                                    <button
                                        onClick={() => setCurrentView('admin-requests')}
                                        className="service-card p-6 rounded-xl text-left"
                                    >
                                        <div className="text-3xl mb-3">üìã</div>
                                        <h3 className="text-lg font-bold text-white mb-1">Service Requests</h3>
                                        <p className="text-slate-400 text-sm">Manage all service requests</p>
                                    </button>

                                    <button
                                        onClick={() => setCurrentView('admin-contracts')}
                                        className="service-card p-6 rounded-xl text-left"
                                    >
                                        <div className="text-3xl mb-3">üìù</div>
                                        <h3 className="text-lg font-bold text-white mb-1">Contracts</h3>
                                        <p className="text-slate-400 text-sm">View all contractor agreements</p>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ============================================
            // ADMIN CONTRACTS PAGE
            // ============================================
            const AdminContractsPage = () => {
                const [contracts, setContracts] = useState([]);

                useEffect(() => {
                    loadContracts();
                }, []);

                const loadContracts = async () => {
                    const allContracts = await DB.getContracts();
                    const contractArray = Object.entries(allContracts || {}).map(([id, contract]) => ({ id, ...contract }));
                    setContracts(contractArray);
                };

                const approveContract = async (contractId) => {
                    if (confirm('Approve this contract and activate it?')) {
                        const contracts = await DB.getContracts();
                        const contract = contracts[contractId];
                        await DB.saveContract(contractId, {
                            ...contract,
                            status: 'active',
                            adminApprovedAt: Date.now()
                        });
                        alert('Contract approved and activated!');
                        loadContracts();
                    }
                };

                const rejectContract = async (contractId) => {
                    const reason = prompt('Enter rejection reason:');
                    if (reason) {
                        const contracts = await DB.getContracts();
                        const contract = contracts[contractId];
                        await DB.saveContract(contractId, {
                            ...contract,
                            status: 'rejected-by-admin',
                            rejectionReason: reason,
                            rejectedAt: Date.now()
                        });
                        alert('Contract rejected.');
                        loadContracts();
                    }
                };

                const closeContract = async (contractId) => {
                    if (confirm('Close this contract?')) {
                        const contracts = await DB.getContracts();
                        const contract = contracts[contractId];
                        await DB.saveContract(contractId, {
                            ...contract,
                            status: 'closed',
                            closedAt: Date.now()
                        });
                        alert('Contract closed.');
                        loadContracts();
                    }
                };

                return (
                    <div className="min-h-screen">
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <button
                                        onClick={() => setCurrentView('admin-dashboard')}
                                        className="text-slate-400 hover:text-white transition flex items-center space-x-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back to Dashboard</span>
                                    </button>
                                    <span className="text-xl font-bold text-white">Manage Contracts</span>
                                    <div className="w-32"></div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <h1 className="text-4xl font-bold text-white mb-8">All Contracts ({contracts.length})</h1>

                                <div className="space-y-4">
                                    {contracts.length === 0 ? (
                                        <div className="text-center py-16 text-slate-400">
                                            <div className="text-6xl mb-4">üìù</div>
                                            <p>No contracts yet</p>
                                        </div>
                                    ) : (
                                        contracts.map(contract => (
                                            <div key={contract.id} className="profile-card p-6 rounded-xl">
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-3">
                                                            <h3 className="text-xl font-bold text-white">{contract.projectTitle}</h3>
                                                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                                contract.status === 'pending-contractor-approval' ? 'bg-yellow-500/20 text-yellow-500' :
                                                                contract.status === 'pending-admin-approval' ? 'bg-orange-500/20 text-orange-500' :
                                                                contract.status === 'active' ? 'bg-green-500/20 text-green-500' :
                                                                contract.status === 'rejected-by-contractor' ? 'bg-red-500/20 text-red-500' :
                                                                contract.status === 'rejected-by-admin' ? 'bg-red-500/20 text-red-500' :
                                                                'bg-slate-500/20 text-slate-400'
                                                            }`}>
                                                                {contract.status}
                                                            </span>
                                                        </div>
                                                        <div className="grid md:grid-cols-2 gap-4 text-sm mb-3">
                                                            <div>
                                                                <span className="text-slate-400">Customer:</span>
                                                                <span className="text-white ml-2">{contract.customerName}</span>
                                                            </div>
                                                            <div>
                                                                <span className="text-slate-400">Technician:</span>
                                                                <span className="text-white ml-2">{contract.technicianName}</span>
                                                            </div>
                                                            <div>
                                                                <span className="text-slate-400">Duration:</span>
                                                                <span className="text-white ml-2">{contract.duration}</span>
                                                            </div>
                                                            <div>
                                                                <span className="text-slate-400">Hours/Week:</span>
                                                                <span className="text-white ml-2">{contract.hoursPerWeek}</span>
                                                            </div>
                                                            <div>
                                                                <span className="text-slate-400">Start Date:</span>
                                                                <span className="text-white ml-2">{contract.startDate}</span>
                                                            </div>
                                                        </div>
                                                        <p className="text-slate-400 text-sm">{contract.projectDescription}</p>
                                                    </div>
                                                    <div className="text-right ml-4">
                                                        <div className="text-2xl font-bold text-green-500 mb-4">${contract.budget}</div>
                                                        
                                                        <div className="space-y-2">
                                                            {contract.status === 'pending-admin-approval' && (
                                                                <>
                                                                    <button
                                                                        onClick={() => approveContract(contract.id)}
                                                                        className="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm"
                                                                    >
                                                                        ‚úì Approve & Activate
                                                                    </button>
                                                                    <button
                                                                        onClick={() => rejectContract(contract.id)}
                                                                        className="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm"
                                                                    >
                                                                        ‚úï Reject
                                                                    </button>
                                                                </>
                                                            )}
                                                            
                                                            {contract.status === 'active' && (
                                                                <button
                                                                    onClick={() => closeContract(contract.id)}
                                                                    className="w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition text-sm"
                                                                >
                                                                    üîí Close Contract
                                                                </button>
                                                            )}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // Placeholder components for other admin pages
            const AdminRequestsPage = () => {
                const [requests, setRequests] = useState([]);
                const [filter, setFilter] = useState('all');

                useEffect(() => {
                    loadRequests();
                }, []);

                const loadRequests = async () => {
                    const allRequests = await DB.getRequests();
                    const requestArray = Object.entries(allRequests || {}).map(([id, req]) => ({ id, ...req }));
                    setRequests(requestArray);
                };

                const approveRequest = async (requestId) => {
                    if (confirm('Approve this request?')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, { ...request, status: 'approved' });
                        alert('Request approved!');
                        loadRequests();
                    }
                };

                const rejectRequest = async (requestId) => {
                    const reason = prompt('Enter rejection reason:');
                    if (reason) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, { ...request, status: 'rejected', rejectionReason: reason });
                        alert('Request rejected.');
                        loadRequests();
                    }
                };

                const requestBudgetIncrease = async (requestId, currentBudget) => {
                    const newBudget = prompt(`Current budget: $${currentBudget}. Enter proposed budget:`, currentBudget);
                    if (newBudget && !isNaN(newBudget) && parseFloat(newBudget) > 0) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            status: 'budget-negotiation',
                            proposedBudget: parseFloat(newBudget),
                            originalBudget: request.budget,
                            proposedBy: 'admin',
                            proposedAt: Date.now()
                        });
                        alert(`Budget proposal sent to customer!\nOriginal: $${currentBudget}\nProposed: $${newBudget}`);
                        loadRequests();
                    }
                };

                const acceptCounterOffer = async (requestId) => {
                    if (confirm('Accept the customer\'s counter offer?')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            budget: request.proposedBudget,
                            status: 'pending',
                            proposedBudget: null,
                            adminProposedBudget: null,
                            originalBudget: null,
                            proposedBy: null,
                            counterOfferAcceptedAt: Date.now()
                        });
                        alert('Counter offer accepted! Request is now pending for approval.');
                        loadRequests();
                    }
                };

                const rejectCounterOffer = async (requestId, customerOffer) => {
                    const newProposal = prompt(`Customer counter offered: $${customerOffer}\nEnter your new proposal (or leave empty to reject):`, customerOffer);
                    if (newProposal && !isNaN(newProposal) && parseFloat(newProposal) > 0) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, {
                            ...request,
                            status: 'budget-negotiation',
                            proposedBudget: parseFloat(newProposal),
                            originalBudget: request.originalBudget || request.budget,
                            proposedBy: 'admin',
                            proposedAt: Date.now()
                        });
                        alert(`New proposal sent to customer: $${newProposal}`);
                        loadRequests();
                    } else if (newProposal !== null && (!newProposal || newProposal.trim() === '')) {
                        if (confirm('Reject counter offer and cancel the request?')) {
                            const requests = await DB.getRequests();
                            const request = requests[requestId];
                            await DB.saveRequest(requestId, {
                                ...request,
                                status: 'rejected',
                                rejectionReason: 'Admin rejected counter offer',
                                rejectedAt: Date.now()
                            });
                            alert('Request rejected.');
                            loadRequests();
                        }
                    }
                };

                const closeRequest = async (requestId) => {
                    if (confirm('Close this request?')) {
                        const requests = await DB.getRequests();
                        const request = requests[requestId];
                        await DB.saveRequest(requestId, { ...request, status: 'closed', closedAt: Date.now() });
                        alert('Request closed.');
                        loadRequests();
                    }
                };

                const filteredRequests = requests.filter(req => {
                    if (filter === 'all') return true;
                    return req.status === filter;
                });

                return (
                    <div className="min-h-screen">
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <button
                                        onClick={() => setCurrentView('admin-dashboard')}
                                        className="text-slate-400 hover:text-white transition flex items-center space-x-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back to Dashboard</span>
                                    </button>
                                    <span className="text-xl font-bold text-white">Manage Requests</span>
                                    <div className="w-32"></div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <div className="flex items-center justify-between mb-8">
                                    <h1 className="text-4xl font-bold text-white">Service Requests</h1>
                                    <div className="flex gap-2 flex-wrap">
                                        {['all', 'pending', 'approved', 'in-progress', 'completed', 'rejected', 'closed', 'budget-negotiation', 'budget-counter-offer'].map(status => (
                                            <button
                                                key={status}
                                                onClick={() => setFilter(status)}
                                                className={`filter-chip px-4 py-2 rounded-lg capitalize text-xs ${
                                                    filter === status ? 'active' : 'bg-slate-800 text-slate-400'
                                                }`}
                                            >
                                                {status === 'budget-negotiation' ? 'üí∞ Budget Neg.' : 
                                                 status === 'budget-counter-offer' ? 'üí¨ Counter' : 
                                                 status}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div className="space-y-4">
                                    {filteredRequests.length === 0 ? (
                                        <div className="text-center py-16 text-slate-400">
                                            <div className="text-6xl mb-4">üìã</div>
                                            <p>No requests found</p>
                                        </div>
                                    ) : (
                                        filteredRequests.map(request => (
                                            <div key={request.id} className="profile-card p-6 rounded-xl">
                                                <div className="flex items-start justify-between">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-3">
                                                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                                request.status === 'pending' ? 'bg-yellow-500/20 text-yellow-500' :
                                                                request.status === 'approved' ? 'bg-blue-500/20 text-blue-500' :
                                                                request.status === 'in-progress' ? 'bg-purple-500/20 text-purple-500' :
                                                                request.status === 'completed' ? 'bg-green-500/20 text-green-500' :
                                                                request.status === 'rejected' ? 'bg-red-500/20 text-red-500' :
                                                                request.status === 'budget-negotiation' ? 'bg-amber-500/20 text-amber-500' :
                                                                request.status === 'budget-counter-offer' ? 'bg-blue-500/20 text-blue-500' :
                                                                'bg-slate-500/20 text-slate-400'
                                                            }`}>
                                                                {request.status}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded text-xs font-semibold ${
                                                                request.priority === 'urgent' ? 'bg-red-500/20 text-red-500' :
                                                                request.priority === 'high' ? 'bg-orange-500/20 text-orange-500' :
                                                                'bg-slate-500/20 text-slate-400'
                                                            }`}>
                                                                {request.priority}
                                                            </span>
                                                        </div>
                                                        
                                                        <h3 className="text-xl font-bold text-white mb-2">
                                                            {request.issueType}
                                                        </h3>
                                                        
                                                        <div className="grid md:grid-cols-2 gap-4 text-sm mb-3">
                                                            <div>
                                                                <span className="text-slate-400">Customer:</span>
                                                                <span className="text-white ml-2">{request.customerName}</span>
                                                            </div>
                                                            <div>
                                                                <span className="text-slate-400">Location:</span>
                                                                <span className="text-white ml-2">{request.city}, {request.state}</span>
                                                            </div>
                                                            {request.technicianName && (
                                                                <div>
                                                                    <span className="text-slate-400">Technician:</span>
                                                                    <span className="text-white ml-2">{request.technicianName}</span>
                                                                </div>
                                                            )}
                                                            <div>
                                                                <span className="text-slate-400">Created:</span>
                                                                <span className="text-white ml-2">{new Date(request.createdAt).toLocaleDateString()}</span>
                                                            </div>
                                                        </div>
                                                        
                                                        <p className="text-slate-400 text-sm">
                                                            {request.description}
                                                        </p>
                                                    </div>
                                                    
                                                    <div className="text-right ml-6">
                                                        <div className="text-3xl font-bold text-green-500 mb-4">
                                                            ${request.budget || 'TBD'}
                                                        </div>
                                                        
                                                        <div className="space-y-2">
                                                            {request.status === 'pending' && (
                                                                <>
                                                                    <button
                                                                        onClick={() => approveRequest(request.id)}
                                                                        className="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm"
                                                                    >
                                                                        ‚úì Approve
                                                                    </button>
                                                                    <button
                                                                        onClick={() => requestBudgetIncrease(request.id, request.budget)}
                                                                        className="w-full px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition text-sm"
                                                                    >
                                                                        üí∞ Budget+
                                                                    </button>
                                                                    <button
                                                                        onClick={() => rejectRequest(request.id)}
                                                                        className="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm"
                                                                    >
                                                                        ‚úï Reject
                                                                    </button>
                                                                </>
                                                            )}
                                                            
                                                            {request.status === 'budget-counter-offer' && (
                                                                <>
                                                                    <div className="mb-3 p-3 bg-blue-500/10 rounded-lg border border-blue-500/30">
                                                                        <div className="text-xs text-slate-400 mb-1">Customer Counter Offer:</div>
                                                                        <div className="text-xl font-bold text-blue-400">${request.proposedBudget}</div>
                                                                        {request.adminProposedBudget && (
                                                                            <div className="text-xs text-slate-500 mt-1">
                                                                                (Your proposal: ${request.adminProposedBudget})
                                                                            </div>
                                                                        )}
                                                                    </div>
                                                                    <button
                                                                        onClick={() => acceptCounterOffer(request.id)}
                                                                        className="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm"
                                                                    >
                                                                        ‚úì Accept Counter
                                                                    </button>
                                                                    <button
                                                                        onClick={() => rejectCounterOffer(request.id, request.proposedBudget)}
                                                                        className="w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition text-sm"
                                                                    >
                                                                        üí¨ New Proposal
                                                                    </button>
                                                                </>
                                                            )}
                                                            
                                                            {request.status === 'budget-negotiation' && (
                                                                <div className="p-3 bg-amber-500/10 rounded-lg border border-amber-500/30">
                                                                    <div className="text-xs text-slate-400 mb-1">Awaiting Customer Response</div>
                                                                    <div className="text-sm text-amber-400">Proposed: ${request.proposedBudget}</div>
                                                                    <div className="text-xs text-slate-500 mt-1">
                                                                        Original: ${request.originalBudget || request.budget}
                                                                    </div>
                                                                </div>
                                                            )}
                                                            
                                                            {(request.status === 'completed' || request.status === 'approved') && (
                                                                <button
                                                                    onClick={() => closeRequest(request.id)}
                                                                    className="w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition text-sm"
                                                                >
                                                                    üîí Close
                                                                </button>
                                                            )}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const AdminTechniciansPage = () => {
                const [technicians, setTechnicians] = useState([]);

                useEffect(() => {
                    loadTechnicians();
                }, []);

                const loadTechnicians = async () => {
                    const allTechs = await DB.getTechnicians();
                    const techArray = Object.entries(allTechs || {}).map(([id, tech]) => ({ id, ...tech }));
                    setTechnicians(techArray);
                };

                const verifyTechnician = async (techId) => {
                    if (confirm('Verify this technician?')) {
                        const techs = await DB.getTechnicians();
                        const tech = techs[techId];
                        const badges = tech.badges || [];
                        if (!badges.includes('verified')) {
                            badges.push('verified');
                        }
                        await DB.saveTechnician(techId, { ...tech, verified: true, badges });
                        alert('Technician verified!');
                        loadTechnicians();
                    }
                };

                const addTopRatedBadge = async (techId) => {
                    if (confirm('Award Top Rated badge?')) {
                        const techs = await DB.getTechnicians();
                        const tech = techs[techId];
                        const badges = tech.badges || [];
                        if (!badges.includes('top-rated')) {
                            badges.push('top-rated');
                        }
                        await DB.saveTechnician(techId, { ...tech, badges });
                        alert('Top Rated badge added!');
                        loadTechnicians();
                    }
                };

                const suspendTechnician = async (techId) => {
                    const reason = prompt('Enter suspension reason:');
                    if (reason) {
                        const techs = await DB.getTechnicians();
                        const tech = techs[techId];
                        await DB.saveTechnician(techId, { ...tech, suspended: true, suspensionReason: reason });
                        alert('Technician suspended.');
                        loadTechnicians();
                    }
                };

                const deleteTechnician = async (techId) => {
                    if (confirm('Are you sure you want to delete this technician? This action cannot be undone.')) {
                        await DB.deleteTechnician(techId);
                        alert('Technician deleted.');
                        loadTechnicians();
                    }
                };

                return (
                    <div className="min-h-screen">
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <button
                                        onClick={() => setCurrentView('admin-dashboard')}
                                        className="text-slate-400 hover:text-white transition flex items-center space-x-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back to Dashboard</span>
                                    </button>
                                    <span className="text-xl font-bold text-white">Manage Technicians</span>
                                    <div className="w-32"></div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <h1 className="text-4xl font-bold text-white mb-8">Technicians ({technicians.length})</h1>

                                <div className="grid md:grid-cols-2 gap-6">
                                    {technicians.map(tech => (
                                        <div key={tech.id} className="profile-card p-6 rounded-xl">
                                            <div className="flex items-start justify-between mb-4">
                                                <div className="flex-1">
                                                    <div className="flex items-center gap-2 mb-2">
                                                        <h3 className="text-xl font-bold text-white">{tech.name}</h3>
                                                        {tech.badges && tech.badges.includes('verified') && (
                                                            <span className="px-2 py-1 bg-green-500/20 text-green-500 rounded-full text-xs font-semibold">
                                                                ‚úì Verified
                                                            </span>
                                                        )}
                                                        {tech.badges && tech.badges.includes('top-rated') && (
                                                            <span className="px-2 py-1 bg-yellow-500/20 text-yellow-500 rounded-full text-xs font-semibold">
                                                                ‚≠ê Top Rated
                                                            </span>
                                                        )}
                                                        {tech.suspended && (
                                                            <span className="px-2 py-1 bg-red-500/20 text-red-500 rounded-full text-xs font-semibold">
                                                                üö´ Suspended
                                                            </span>
                                                        )}
                                                    </div>
                                                    
                                                    <div className="text-sm space-y-1 mb-3">
                                                        <p className="text-slate-400">
                                                            <span className="text-white font-semibold">Email:</span> {tech.email}
                                                        </p>
                                                        <p className="text-slate-400">
                                                            <span className="text-white font-semibold">Phone:</span> {tech.phone}
                                                        </p>
                                                        <p className="text-slate-400">
                                                            <span className="text-white font-semibold">Location:</span> {tech.city}, {tech.state}
                                                        </p>
                                                        <p className="text-slate-400">
                                                            <span className="text-white font-semibold">Experience:</span> {tech.experience} years
                                                        </p>
                                                        <p className="text-slate-400">
                                                            <span className="text-white font-semibold">Rate:</span> ${tech.hourlyRate}/hr
                                                        </p>
                                                    </div>
                                                    
                                                    <div className="flex flex-wrap gap-2 mb-3">
                                                        {tech.skills && tech.skills.map(skill => (
                                                            <span key={skill} className="skill-badge text-red-500">
                                                                {skill}
                                                            </span>
                                                        ))}
                                                    </div>
                                                    
                                                    <p className="text-slate-400 text-sm">{tech.bio}</p>
                                                </div>
                                            </div>
                                            
                                            <div className="flex gap-2 mt-4">
                                                {!tech.verified && (
                                                    <button
                                                        onClick={() => verifyTechnician(tech.id)}
                                                        className="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm"
                                                    >
                                                        ‚úì Verify
                                                    </button>
                                                )}
                                                {(!tech.badges || !tech.badges.includes('top-rated')) && (
                                                    <button
                                                        onClick={() => addTopRatedBadge(tech.id)}
                                                        className="flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition text-sm"
                                                    >
                                                        ‚≠ê Top Rated
                                                    </button>
                                                )}
                                                {!tech.suspended && (
                                                    <button
                                                        onClick={() => suspendTechnician(tech.id)}
                                                        className="flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition text-sm"
                                                    >
                                                        üö´ Suspend
                                                    </button>
                                                )}
                                                <button
                                                    onClick={() => deleteTechnician(tech.id)}
                                                    className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm"
                                                >
                                                    ‚úï Delete
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const AdminCustomersPage = () => {
                const [customers, setCustomers] = useState([]);

                useEffect(() => {
                    loadCustomers();
                }, []);

                const loadCustomers = async () => {
                    const allCustomers = await DB.getCustomers();
                    const customerArray = Object.entries(allCustomers || {}).map(([id, customer]) => ({ id, ...customer }));
                    setCustomers(customerArray);
                };

                const deleteCustomer = async (customerId) => {
                    if (confirm('Are you sure you want to delete this customer? This action cannot be undone.')) {
                        await DB.deleteCustomer(customerId);
                        alert('Customer deleted.');
                        loadCustomers();
                    }
                };

                return (
                    <div className="min-h-screen">
                        <nav className="fixed top-0 w-full bg-slate-900/80 backdrop-blur-lg border-b border-slate-800 z-50">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center h-16">
                                    <button
                                        onClick={() => setCurrentView('admin-dashboard')}
                                        className="text-slate-400 hover:text-white transition flex items-center space-x-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back to Dashboard</span>
                                    </button>
                                    <span className="text-xl font-bold text-white">Manage Customers</span>
                                    <div className="w-32"></div>
                                </div>
                            </div>
                        </nav>

                        <div className="pt-24 pb-12 px-4">
                            <div className="max-w-7xl mx-auto">
                                <h1 className="text-4xl font-bold text-white mb-8">Customers ({customers.length})</h1>

                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {customers.map(customer => (
                                        <div key={customer.id} className="profile-card p-6 rounded-xl">
                                            <h3 className="text-xl font-bold text-white mb-3">{customer.name}</h3>
                                            <div className="text-sm space-y-1 mb-4">
                                                <p className="text-slate-400">
                                                    <span className="text-white font-semibold">Email:</span> {customer.email}
                                                </p>
                                                <p className="text-slate-400">
                                                    <span className="text-white font-semibold">Phone:</span> {customer.phone}
                                                </p>
                                                <p className="text-slate-400">
                                                    <span className="text-white font-semibold">Location:</span> {customer.city}, {customer.state}
                                                </p>
                                                <p className="text-slate-400">
                                                    <span className="text-white font-semibold">Joined:</span> {new Date(customer.createdAt).toLocaleDateString()}
                                                </p>
                                            </div>
                                            <button
                                                onClick={() => deleteCustomer(customer.id)}
                                                className="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm"
                                            >
                                                ‚úï Delete Customer
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div>
                    {currentView === 'landing' && <LandingPage />}
                    {currentView === 'login' && <LoginPage />}
                    {currentView === 'register' && <RegisterPage />}
                    {currentView === 'register-technician' && <RegisterTechnicianPage />}
                    {currentView === 'customer-dashboard' && <CustomerDashboard />}
                    {currentView === 'customer-quick-fix' && <CustomerQuickFix />}
                    {currentView === 'customer-hire-contractor' && <CustomerHireContractor />}
                    {currentView === 'technician-dashboard' && <TechnicianDashboard />}
                    {currentView === 'admin-dashboard' && <AdminDashboard />}
                    {currentView === 'admin-requests' && <AdminRequestsPage />}
                    {currentView === 'admin-technicians' && <AdminTechniciansPage />}
                    {currentView === 'admin-customers' && <AdminCustomersPage />}
                    {currentView === 'admin-contracts' && <AdminContractsPage />}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>